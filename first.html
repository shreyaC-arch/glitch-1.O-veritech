<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Fraud Detection â€“ Index</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body{
  background:linear-gradient(135deg,#6a11cb,#2575fc);
  min-height:100vh;
}
.container-box{
  background:#fff;
  border-radius:12px;
  padding:30px;
  margin-top:60px;
  box-shadow:0 8px 20px rgba(0,0,0,0.25);
}
</style>
</head>
<body>

<nav class="navbar navbar-dark bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand fw-bold" href="#">Fraud Detector</a>
    <a href="history.html" class="btn btn-outline-light btn-sm">History</a>
  </div>
</nav>

<div class="container container-box">
  <h2 class="mb-4 text-center">Enter Transaction Details</h2>
  <form id="fraudForm">
    <div class="mb-3">
      <label class="form-label">Transaction ID</label>
      <input type="text" id="transactionId" class="form-control" required>
    </div>
    <div class="mb-3">
      <label class="form-label">User ID</label>
      <input type="text" id="userId" class="form-control" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Amount (â‚¹)</label>
      <input type="number" id="amount" class="form-control" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Upload Payment Slip</label>
      <input type="file" id="paymentSlip" class="form-control" accept="image/*,application/pdf">
    </div>
    <button type="submit" class="btn btn-primary w-100">Detect Fraud</button>
  </form>
</div>

<script>
document.getElementById('fraudForm').addEventListener('submit', function(e){
  e.preventDefault();

  const transactionId = document.getElementById('transactionId').value.trim();
  const userId = document.getElementById('userId').value.trim();
  const amount = parseFloat(document.getElementById('amount').value);

  // ðŸ‘‰ Simple simulated fraud check (replace with API call if needed)
  const riskScore = Math.random()*100;
  const verdict = riskScore > 70 ? "Fraudulent" : "Safe";

  const record = {
    transactionId,
    userId,
    amount,
    verdict,
    riskScore: riskScore.toFixed(2),
    timestamp: new Date().toLocaleString()
  };

  // Save to history
  const history = JSON.parse(localStorage.getItem('fraudHistory') || '[]');
  history.unshift(record);
  localStorage.setItem('fraudHistory', JSON.stringify(history.slice(0,100)));

  // Save the latest record for submit.html
  localStorage.setItem('latestFraudRecord', JSON.stringify(record));

  // âœ… Redirect to submit page
  window.location.href = "submit.html";
});
</script>
</body>
</html>
