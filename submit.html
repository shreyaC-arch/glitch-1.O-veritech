<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Submission Result</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body {
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  background: #f8f9fa;
}
.container-box {
  background: #fff;
  border-radius: 12px;
  padding: 30px;
  margin-top: 60px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.2);
  text-align: center;
}
.badge-verdict {
  font-size: 1.1rem;
  padding: 0.6rem 1rem;
  border-radius: 50rem;
}
.safe   { background: #28a745; }
.review { background: #ffc107; color:#212529; }
.fraud  { background: #dc3545; }
.banner-fraud {
  background: #dc3545;
  color: #fff;
  padding: 1rem;
  font-size: 1.4rem;
  border-radius: 8px;
  margin-bottom: 20px;
  box-shadow: 0 0 15px rgba(220,53,69,.6);
}
</style>
</head>
<body>

<nav class="navbar navbar-dark bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand fw-bold" href="index.html">⬅ Back to Detector</a>
    <a href="history.html" class="btn btn-outline-light btn-sm">History</a>
  </div>
</nav>

<div class="container">
  <div class="container-box">
    <h2 class="mb-3">Submission Successful ✅</h2>
    <div id="fraudBanner"></div>

    <div id="recordDetails" class="mt-3"></div>

    <a href="index.html" class="btn btn-primary mt-4">Go to Home</a>
  </div>
</div>

<script>
const latest = JSON.parse(localStorage.getItem('latestFraudRecord') || 'null');
const fraudBanner = document.getElementById('fraudBanner');
const recordDetails = document.getElementById('recordDetails');

if (latest) {
  // Banner if Fraudulent
  if (latest.verdict === 'Fraudulent') {
    fraudBanner.innerHTML = `<div class="banner-fraud">
      ⚠️ WARNING: This transaction is flagged as FRAUDULENT!
    </div>`;
  }

  // Show record details with color-coded badge
  const badgeClass = latest.verdict === 'Fraudulent' ? 'fraud' :
                     latest.verdict === 'Review' ? 'review' : 'safe';
  recordDetails.innerHTML = `
    <p><strong>Transaction ID:</strong> ${latest.transactionId}</p>
    <p><strong>User ID:</strong> ${latest.userId}</p>
    <p><strong>Amount:</strong> ₹${latest.amount}</p>
    <p><strong>Channel:</strong> ${latest.channel}</p>
    <p><strong>Location:</strong> ${latest.location}</p>
    <p><strong>Device:</strong> ${latest.deviceId}</p>
    <p><strong>Time:</strong> ${latest.timestamp}</p>
    <p><span class="badge-verdict ${badgeClass}">
      Verdict: ${latest.verdict} | Risk: ${latest.riskScore}
    </span></p>
  `;
} else {
  recordDetails.innerHTML = "<p class='text-danger'>No transaction record found.</p>";
}
</script>

</body>
</html>
